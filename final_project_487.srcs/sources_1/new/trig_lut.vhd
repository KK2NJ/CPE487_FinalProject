library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;
use work.graphic_pkg.all;

entity trig_lut is
    port (
        angle   : in  unsigned(7 downto 0);  -- 0-255 -> 0..2π
        sin_out : out fixed_point;          -- Q16.16
        cos_out : out fixed_point           -- Q16.16
    );
end entity trig_lut;

architecture rtl of trig_lut is
    type lut_array is array(0 to 255) of fixed_point;

    --------------------------------------------------------------------
    -- Q16.16 sine/cosine lookup tables, 256 entries, 0..2π
    -- angle = i * 2π / 256
    --------------------------------------------------------------------
    constant SIN_LUT : lut_array := (
          0 => x"00000000",
          1 => x"00000648",
          2 => x"00000C90",
          3 => x"000012D5",
          4 => x"00001918",
          5 => x"00001F56",
          6 => x"00002590",
          7 => x"00002BC4",
          8 => x"000031F1",
          9 => x"00003817",
         10 => x"00003E34",
         11 => x"00004447",
         12 => x"00004A50",
         13 => x"0000504E",
         14 => x"00005640",
         15 => x"00005C25",
         16 => x"000061FC",
         17 => x"000067C4",
         18 => x"00006D7D",
         19 => x"00007325",
         20 => x"000078BC",
         21 => x"00007E41",
         22 => x"000083B4",
         23 => x"00008912",
         24 => x"00008E5D",
         25 => x"00009392",
         26 => x"000098B1",
         27 => x"00009DB9",
         28 => x"0000A2AA",
         29 => x"0000A783",
         30 => x"0000AC43",
         31 => x"0000B0E9",
         32 => x"0000B575",
         33 => x"0000B9E7",
         34 => x"0000BE3D",
         35 => x"0000C277",
         36 => x"0000C696",
         37 => x"0000CA96",
         38 => x"0000CE79",
         39 => x"0000D23E",
         40 => x"0000D5E4",
         41 => x"0000D96A",
         42 => x"0000DCD0",
         43 => x"0000E015",
         44 => x"0000E338",
         45 => x"0000E639",
         46 => x"0000E918",
         47 => x"0000EBD3",
         48 => x"0000EE6B",
         49 => x"0000F0DE",
         50 => x"0000F32D",
         51 => x"0000F557",
         52 => x"0000F75B",
         53 => x"0000F93A",
         54 => x"0000FAF3",
         55 => x"0000FC85",
         56 => x"0000FDF0",
         57 => x"0000FF35",
         58 => x"00010052",
         59 => x"00010148",
         60 => x"00010216",
         61 => x"000102BD",
         62 => x"0001033C",
         63 => x"00010393",
         64 => x"000103C2",
         65 => x"000103CA",
         66 => x"000103A9",
         67 => x"00010360",
         68 => x"000102EF",
         69 => x"00010257",
         70 => x"00010198",
         71 => x"000100B1",
         72 => x"0000FFA4",
         73 => x"0000FE71",
         74 => x"0000FD18",
         75 => x"0000FB9A",
         76 => x"0000F9F7",
         77 => x"0000F830",
         78 => x"0000F645",
         79 => x"0000F437",
         80 => x"0000F207",
         81 => x"0000EFB5",
         82 => x"0000ED42",
         83 => x"0000EAAF",
         84 => x"0000E7FD",
         85 => x"0000E52C",
         86 => x"0000E23E",
         87 => x"0000DF33",
         88 => x"0000DC0C",
         89 => x"0000D8CA",
         90 => x"0000D56E",
         91 => x"0000D1F9",
         92 => x"0000CE6C",
         93 => x"0000CAD8",
         94 => x"0000C72D",
         95 => x"0000C36E",
         96 => x"0000BF9B",
         97 => x"0000BBB5",
         98 => x"0000B7BE",
         99 => x"0000B3B6",
        100 => x"0000AF9F",
        101 => x"0000AB7A",
        102 => x"0000A747",
        103 => x"0000A308",
        104 => x"00009EBE",
        105 => x"00009A6B",
        106 => x"0000960E",
        107 => x"000091AA",
        108 => x"00008D3F",
        109 => x"000088CF",
        110 => x"0000845A",
        111 => x"00007FE1",
        112 => x"00007B67",
        113 => x"000076EB",
        114 => x"0000726F",
        115 => x"00006DF4",
        116 => x"0000697B",
        117 => x"00006506",
        118 => x"00006096",
        119 => x"00005C2B",
        120 => x"000057C6",
        121 => x"0000536A",
        122 => x"00004F17",
        123 => x"00004ACF",
        124 => x"00004693",
        125 => x"00004264",
        126 => x"00003E43",
        127 => x"00003A31",
        128 => x"0000362F",
        129 => x"0000323F",
        130 => x"00002E60",
        131 => x"00002A96",
        132 => x"000026E0",
        133 => x"00002340",
        134 => x"00001FB7",
        135 => x"00001C47",
        136 => x"000018F0",
        137 => x"000015B4",
        138 => x"00001294",
        139 => x"00000F90",
        140 => x"00000CAA",
        141 => x"000009E3",
        142 => x"0000073C",
        143 => x"000004B5",
        144 => x"00000250",
        145 => x"0000000D",
        146 => x"FFFFFDED",
        147 => x"FFFFFBF1",
        148 => x"FFFFFA1B",
        149 => x"FFFFF86A",
        150 => x"FFFFF6E0",
        151 => x"FFFFF57E",
        152 => x"FFFFF444",
        153 => x"FFFFF333",
        154 => x"FFFFF24D",
        155 => x"FFFFF191",
        156 => x"FFFFF0FF",
        157 => x"FFFFF09A",
        158 => x"FFFFF060",
        159 => x"FFFFF052",
        160 => x"FFFFF070",
        161 => x"FFFFF0BA",
        162 => x"FFFFF130",
        163 => x"FFFFF1D3",
        164 => x"FFFFF2A3",
        165 => x"FFFFF3A0",
        166 => x"FFFFF4C9",
        167 => x"FFFFF61F",
        168 => x"FFFFF7A1",
        169 => x"FFFFF94E",
        170 => x"FFFFFB27",
        171 => x"FFFFFD2A",
        172 => x"FFFFFF58",
        173 => x"000001B0",
        174 => x"00000431",
        175 => x"000006DA",
        176 => x"000009AB",
        177 => x"00000CA3",
        178 => x"00000FC2",
        179 => x"00001306",
        180 => x"00001670",
        181 => x"00001A00",
        182 => x"00001DB3",
        183 => x"0000218B",
        184 => x"00002586",
        185 => x"000029A3",
        186 => x"00002DE1",
        187 => x"0000323F",
        188 => x"000036BA",
        189 => x"00003B52",
        190 => x"00003FFF",
        191 => x"000044CE",
        192 => x"000049B7",
        193 => x"00004EB8",
        194 => x"000053D1",
        195 => x"000058FF",
        196 => x"00005E40",
        197 => x"00006393",
        198 => x"000068F6",
        199 => x"00006E66",
        200 => x"000073E2",
        201 => x"00007969",
        202 => x"00007EF7",
        203 => x"0000848B",
        204 => x"00008A23",
        205 => x"00008FBC",
        206 => x"00009552",
        207 => x"00009AE4",
        208 => x"0000A06F",
        209 => x"0000A5F0",
        210 => x"0000AB64",
        211 => x"0000B0C8",
        212 => x"0000B61A",
        213 => x"0000BB58",
        214 => x"0000C07F",
        215 => x"0000C58D",
        216 => x"0000CA7E",
        217 => x"0000CF51",
        218 => x"0000D403",
        219 => x"0000D892",
        220 => x"0000DDFA",
        221 => x"0000E238",
        222 => x"0000E64A",
        223 => x"0000EA2F",
        224 => x"0000EDE1",
        225 => x"0000F162",
        226 => x"0000F4AB",
        227 => x"0000F7BC",
        228 => x"0000FA92",
        229 => x"0000FD2A",
        230 => x"0000FF85",
        231 => x"000101A0",
        232 => x"00010379",
        233 => x"00010511",
        234 => x"00010665",
        235 => x"00010777",
        236 => x"00010844",
        237 => x"000108CD",
        238 => x"00010910",
        239 => x"0001090F",
        240 => x"000108C8",
        241 => x"0001083D",
        242 => x"0001076D",
        243 => x"00010658",
        244 => x"00010501",
        245 => x"00010366",
        246 => x"0001018A",
        247 => x"0000FF6E",
        248 => x"0000FD12",
        249 => x"0000FA78",
        250 => x"0000F7A3",
        251 => x"0000F492",
        252 => x"0000F149",
        253 => x"0000EDC9",
        254 => x"0000EA12",
        255 => x"0000E625"
    );

    constant COS_LUT : lut_array := (
          0 => x"00010000",
          1 => x"0000FFEC",
          2 => x"0000FFB1",
          3 => x"0000FF4E",
          4 => x"0000FEC4",
          5 => x"0000FE13",
          6 => x"0000FD3B",
          7 => x"0000FC3B",
          8 => x"0000FB15",
          9 => x"0000F9C8",
         10 => x"0000F854",
         11 => x"0000F6BA",
         12 => x"0000F4FA",
         13 => x"0000F314",
         14 => x"0000F109",
         15 => x"0000EED9",
         16 => x"0000EC8E",
         17 => x"0000EA1F",
         18 => x"0000E78E",
         19 => x"0000E4DB",
         20 => x"0000E208",
         21 => x"0000DF14",
         22 => x"0000DC01",
         23 => x"0000D8D0",
         24 => x"0000D581",
         25 => x"0000D215",
         26 => x"0000CE8D",
         27 => x"0000CAE9",
         28 => x"0000C72C",
         29 => x"0000C356",
         30 => x"0000BF67",
         31 => x"0000BB61",
         32 => x"0000B745",
         33 => x"0000B313",
         34 => x"0000AECB",
         35 => x"0000AA71",
         36 => x"0000A603",
         37 => x"0000A184",
         38 => x"00009CF5",
         39 => x"00009856",
         40 => x"000093A9",
         41 => x"00008EEE",
         42 => x"00008A26",
         43 => x"00008554",
         44 => x"00008077",
         45 => x"00007B91",
         46 => x"000076A4",
         47 => x"000071AF",
         48 => x"00006CB5",
         49 => x"000067B7",
         50 => x"000062B5",
         51 => x"00005DB0",
         52 => x"000058A9",
         53 => x"000053A2",
         54 => x"00004E9A",
         55 => x"00004993",
         56 => x"0000448F",
         57 => x"00003F8D",
         58 => x"00003A8F",
         59 => x"00003596",
         60 => x"000030A2",
         61 => x"00002BB4",
         62 => x"000026CD",
         63 => x"000021EE",
         64 => x"00001D17",
         65 => x"00001849",
         66 => x"00001386",
         67 => x"00000ECD",
         68 => x"00000A21",
         69 => x"00000581",
         70 => x"000001EF",
         71 => x"FFFFFE6A",
         72 => x"FFFFF9F3",
         73 => x"FFFFF58C",
         74 => x"FFFFF137",
         75 => x"FFFFECF2",
         76 => x"FFFFE8C0",
         77 => x"FFFFE4A2",
         78 => x"FFFFE097",
         79 => x"FFFFDCA2",
         80 => x"FFFFD8C3",
         81 => x"FFFFD4FD",
         82 => x"FFFFD151",
         83 => x"FFFFCDBF",
         84 => x"FFFFCA4A",
         85 => x"FFFFC6F3",
         86 => x"FFFFC3BB",
         87 => x"FFFFC0A4",
         88 => x"FFFFBDAE",
         89 => x"FFFFBADE",
         90 => x"FFFFB833",
         91 => x"FFFFB5AE",
         92 => x"FFFFB352",
         93 => x"FFFFB11F",
         94 => x"FFFFAF18",
         95 => x"FFFFAD3D",
         96 => x"FFFFAB8E",
         97 => x"FFFFAA0F",
         98 => x"FFFFA8BE",
         99 => x"FFFFA79E",
        100 => x"FFFFA6AF",
        101 => x"FFFFA5F3",
        102 => x"FFFFA56A",
        103 => x"FFFFA515",
        104 => x"FFFFA4F4",
        105 => x"FFFFA509",
        106 => x"FFFFA553",
        107 => x"FFFFA5D4",
        108 => x"FFFFA68B",
        109 => x"FFFFA77A",
        110 => x"FFFFA8A0",
        111 => x"FFFFA9FD",
        112 => x"FFFFAB93",
        113 => x"FFFFAD60",
        114 => x"FFFFAF66",
        115 => x"FFFFB1A4",
        116 => x"FFFFB41A",
        117 => x"FFFFB6C7",
        118 => x"FFFFB9AC",
        119 => x"FFFFBCCA",
        120 => x"FFFFC020",
        121 => x"FFFFC3AD",
        122 => x"FFFFC772",
        123 => x"FFFFCB6E",
        124 => x"FFFFCFA1",
        125 => x"FFFFD40A",
        126 => x"FFFFD8A8",
        127 => x"FFFFDD7B",
        128 => x"FFFFE283",
        129 => x"FFFFE7BE",
        130 => x"FFFFED2B",
        131 => x"FFFFF2CA",
        132 => x"FFFFF898",
        133 => x"FFFFFE96",
        134 => x"000004C1",
        135 => x"00000B19",
        136 => x"0000119B",
        137 => x"00001848",
        138 => x"00001F1C",
        139 => x"00002619",
        140 => x"00002D3A",
        141 => x"00003480",
        142 => x"00003BE8",
        143 => x"00004372",
        144 => x"00004B1A",
        145 => x"000052DF",
        146 => x"00005AC0",
        147 => x"000062BA",
        148 => x"00006ACB",
        149 => x"000072F1",
        150 => x"00007B29",
        151 => x"00008371",
        152 => x"00008BC7",
        153 => x"00009427",
        154 => x"00009C90",
        155 => x"0000A4FD",
        156 => x"0000AD6C",
        157 => x"0000B5D8",
        158 => x"0000BE3E",
        159 => x"0000C69A",
        160 => x"0000CEDA",
        161 => x"0000D6F9",
        162 => x"0000DEF4",
        163 => x"0000E6C8",
        164 => x"0000EE70",
        165 => x"0000F5E9",
        166 => x"0000FD2F",
        167 => x"0001043E",
        168 => x"00010B12",
        169 => x"000111A8",
        170 => x"000117FC",
        171 => x"00011E0A",
        172 => x"000123D0",
        173 => x"0001294A",
        174 => x"00012E76",
        175 => x"00013351",
        176 => x"000137D7",
        177 => x"00013C07",
        178 => x"00013FDD",
        179 => x"00014358",
        180 => x"00014676",
        181 => x"00014936",
        182 => x"00014B95",
        183 => x"00014D93",
        184 => x"00014F2E",
        185 => x"00015065",
        186 => x"00015136",
        187 => x"000151A1",
        188 => x"000151A4",
        189 => x"00015140",
        190 => x"00015073",
        191 => x"00014F3E",
        192 => x"00014DA0",
        193 => x"00014B9A",
        194 => x"0001492C",
        195 => x"00014657",
        196 => x"0001431C",
        197 => x"00013F7D",
        198 => x"00013B7C",
        199 => x"0001371B",
        200 => x"0001325B",
        201 => x"00012D40",
        202 => x"000127CB",
        203 => x"00012201",
        204 => x"00011BE3",
        205 => x"00011574",
        206 => x"00010EB8",
        207 => x"000107B2",
        208 => x"00010063",
        209 => x"FFFFF8D2",
        210 => x"FFFFF101",
        211 => x"FFFFE8F4",
        212 => x"FFFFE0AD",
        213 => x"FFFFD832",
        214 => x"FFFFCF86",
        215 => x"FFFFC6AC",
        216 => x"FFFFBDA9",
        217 => x"FFFFB480",
        218 => x"FFFFAB37",
        219 => x"FFFFA1D1",
        220 => x"FFFF9852",
        221 => x"FFFF8EBD",
        222 => x"FFFF8518",
        223 => x"FFFF7B64",
        224 => x"FFFF71A8",
        225 => x"FFFF67E7",
        226 => x"FFFF5E27",
        227 => x"FFFF546D",
        228 => x"FFFF4ABD",
        229 => x"FFFF411D",
        230 => x"FFFF3792",
        231 => x"FFFF2E20",
        232 => x"FFFF24CD",
        233 => x"FFFF1BA0",
        234 => x"FFFF129D",
        235 => x"FFFF09CC",
        236 => x"FFFF012F",
        237 => x"FFFDF8CC",
        238 => x"FFFDF0A7",
        239 => x"FFFDE8C0",
        240 => x"FFFDE116",
        241 => x"FFFDD9AC",
        242 => x"FFFDD282",
        243 => x"FFFDCB99",
        244 => x"FFFDC4F1",
        245 => x"FFFDBE8B",
        246 => x"FFFDB868",
        247 => x"FFFDB287",
        248 => x"FFFDACE9",
        249 => x"FFFDA78E",
        250 => x"FFFDA276",
        251 => x"FFFD9DA1",
        252 => x"FFFD990E",
        253 => x"FFFD94BF",
        254 => x"FFFD90B1",
        255 => x"FFFD8CEE"
    );

begin
    sin_out <= SIN_LUT(to_integer(angle));
    cos_out <= COS_LUT(to_integer(angle));
end architecture rtl;
